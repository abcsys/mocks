apiVersion: mock.digi.dev/v1
kind: Room
metadata:
  name: {{ .Values.name }}
spec:
  control:
    brightness:
      intent: 1
    mode:
      intent: work
  # data router settings
  ingress:
    device_power:
      sources: [ kind:any@energy ]
      flow: "sort -r event_ts | head"
      flow_agg: "select sum(watt) as watt"
      eoio: false
    occupancy:
      sources: [ kind:occupancy@detected ]
      flow: ""
  egress:
    avg_power:
      flow: "select avg(watt) as watt"
